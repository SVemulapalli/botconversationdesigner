<!DOCTYPE HTML>
<html>
<head>
    <title>Bot Conversation Designer</title>
<style>
</style>
    <link href="css/style.css" rel="stylesheet" />
    <link href="https://cdn.botframework.com/botframework-webchat/latest/botchat.css" rel="stylesheet" />
    <script src="js/go.js"></script>
    <script src="js/diagram.js"></script>
    <script src="js/activities.js"></script>
    <script src="js/offlinebotchat.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body onload="init()">
    <div id="header"><b>bot</b>conversation<b>designer</b></div>
    <div id="main">
        <div id="left" class="panel">
            <div id="botWC" class=largeChild></div>
        </div>
        <div id="center" class="panel">
            <div class=largeChild style="position:relative">
            <div class=wc-header><span style="font-size:15px">Designer</span></div>
            <div style="position:absolute;top:40px">      
                <button onclick="menu.new()">New</button>
                <button onclick="menu.save()">Save</button>
                <button onclick="menu.load()">Load</button><input type="file" id="fileToLoad" style="display:none">
                <button onclick="menu.PlayStep()">Play From Step</button>
                <button onclick="menu.exportCsharp()" style="margin-left: 20px;display:none">Export to C#</button>
                <button onclick="menu.exportNodejs()">Export to Node</button>
            </div>
            <div class="godiag">
                <div id="myPaletteDiv"></div>
                <div id="myDiagramDiv"></div>
            </div>
            
            </div>
        </div>
        <div id="right" class="panel">
            <div class=largeChild style="position:relative">
                <div class=wc-header><span style="font-size:15px">Properties</span></div>
                <div style="padding-top:60px;" id=propList></div>
        
                <textarea id="mySavedModel" style="display:none;width:100%;height:300px">{ "class": "go.GraphLinksModel","linkFromPortIdProperty": "fromPort","linkToPortIdProperty": "toPort","nodeDataArray": [],"linkDataArray": []}    </textarea>
        
            </div>
        </div>
    </div>
    <div id="footer">2019 Luis Alves Martins</div>

    <script>
var DirectLineEmulator;        
function init()
{
      const user = {
        id: 'Luis',
        name: 'Luis'
      };
      const bot = {
        id: 'botid',
        name: 'botname'
      };

      BotChat.App({
        bot: bot,
        user: user,
        botConnection: new BotChat.DirectLine({}),
        //to disable user shell
        //disabled:true
      }, document.getElementById('botWC'));

    DirectLineEmulator={
      emptyActivity:{
          "activities": [],
          "watermark": "0"
      },
      userActivity:function(activity){
      //Every time the user sends an activity: 
          Bot.receiveMessage(activity);
      },
      getActivity:function(activity){
      //The bot polls this function every 1000ms, change activity to the message you want to display
          //console.log("ACTIVITY SENT")
          return this.emptyActivity;
      }
    }
    goDiagram();
}        
</script>    
</body>
</html>